<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="ppck-ver" content="c4201a919304280e6179386e9f2da0f7" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Video URL Extractor</title>
  <style>
    body{font-family:Arial,sans-serif;background:#f0f2f5;margin:0;padding:20px 0;color:#333}
    .container{max-width:820px;margin:0 auto;background:#fff;padding:35px;border-radius:20px;box-shadow:0 15px 40px rgba(0,0,0,0.12);text-align:center}
    h1{color:#e91e63;font-size:34px;margin-bottom:30px}
    input{width:100%;padding:16px;font-size:17px;border:2px solid #e0e0e0;border-radius:12px;margin-bottom:20px;box-sizing:border-box}
    button{background:#e91e63;color:white;border:none;padding:16px 40px;font-size:19px;border-radius:12px;cursor:pointer;transition:0.3s;box-shadow:0 5px 15px rgba(233,30,99,0.3)}
    button:hover{background:#c2185b;transform:translateY(-2px)}
    button:disabled{opacity:0.6;cursor:not-allowed}
    .output-box{margin-top:25px;padding:20px;background:#fafafa;border:1px solid #eee;border-radius:12px;min-height:80px;text-align:left;font-size:15px;line-height:1.6}
    .result-heading{font-weight:bold;color:#e91e63;margin:0 0 15px 0}
    .link-wrapper{margin:12px 0;padding:14px;background:#f0f0f0;border-radius:10px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
    .output-link{color:#e91e63;font-weight:bold;word-break:break-all}
    .copy-btn{background:#333;color:white;padding:8px 18px;border:none;border-radius:8px;cursor:pointer;font-size:14px}
    .copy-btn:hover{background:#000}

    /* 影片廣告 */
    .video-ad{margin:45px auto;padding:28px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,0.3);max-width:720px;overflow:hidden}
    .video-ad a{text-decoration:none;color:white;display:block}
    .video-ad img{width:100%;height:auto;border-radius:16px;border:6px solid white;box-shadow:0 12px 25px rgba(0,0,0,0.5)}
    .video-ad .title{font-size:28px;font-weight:bold;margin:18px 0;text-shadow:2px 2px 10px rgba(0,0,0,0.8)}
    .video-ad .info{font-size:19px;opacity:0.95}

    /* myvidplay 直鏈專區 */
    .direct-links{margin:50px auto;padding:25px;background:#1a1a1a;color:white;border-radius:18px;max-width:720px;box-shadow:0 15px 35px rgba(0,0,0,0.5)}
    .direct-links h3{color:#00ff9d;font-size:26px;margin:0 0 25px 0}
    .direct-link-item{margin:18px 0;padding:15px;background:rgba(255,255,255,0.1);border-radius:12px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
    .direct-link-item a{color:#00ff9d;font-weight:bold;font-size:17px;word-break:break-all}
    .direct-copy{background:#00ff9d;color:#000;padding:10px 20px;border-radius:10px;font-weight:bold;cursor:pointer}
  </style>
</head>
<body>

  <div class="container">
    <h1>Direct Video URL Extractor</h1>
    <input type="url" id="urlInput" placeholder="Paste a video page URL..." autocomplete="off" />
    <button id="extractBtn" onclick="extractLinks()">Extract Direct Link</button>
    
    <div id="output" class="output-box">Output will appear here...</div>

    <!-- 兩部 streamruby 影片廣告 -->
    <div class="video-ad">
      <a href="https://streamruby.com/5vzicy0uw32s.html" target="_blank" rel="nofollow">
        <img src="https://img.streamruby.com//5vzicy0uw32s_t.jpg" alt="Trim2">
        <div class="title">kalvin tool 147111795 da2-1-16 Trim2</div>
        <div class="info">[640x384 | 01:19] Click to Watch Full HD Now!</div>
      </a>
    </div>

    <div class="video-ad">
      <a href="https://streamruby.com/xc8klcx5fgfc.html" target="_blank" rel="nofollow">
        <img src="https://img.streamruby.com//xc8klcx5fgfc_t.jpg" alt="Trim">
        <div class="title">kalvin tool 147111795 da2-1-16 Trim</div>
        <div class="info">[640x384 | 01:24] Click to Watch Full HD Now!</div>
      </a>
    </div>

    <!-- 兩條 myvidplay 直鏈專區（永遠顯示） -->
    <div class="direct-links">
      <h3>Recommended Direct Links</h3>
      
      <div class="direct-link-item">
        <a href="https://myvidplay.com/d/kmom3816289l" target="_blank">https://myvidplay.com/d/kmom3816289l</a>
        <button class="direct-copy" onclick="copyToClipboard('https://myvidplay.com/d/kmom3816289l')">Copy</button>
      </div>
      
      <div class="direct-link-item">
        <a href="https://myvidplay.com/d/5zws5fguhf4o" target="_blank">https://myvidplay.com/d/5zws5fguhf4o</a>
        <button class="direct-copy" onclick="copyToClipboard('https://myvidplay.com/d/5zws5fguhf4o')">Copy</button>
      </div>
    </div>

  </div>

  <script>
    // 複製功能
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert('Copied to clipboard!');
      });
    }

    // 原本的提取功能（完全保留）
    function createLink(url) {
      const a = document.createElement('a');
      a.href = url; a.textContent = url; a.target = "_blank"; a.rel = "noopener noreferrer";
      a.className = 'output-link'; return a;
    }
    function createCopyBtn(linkUrl) {
      const btn = document.createElement('button');
      btn.textContent = 'Copy'; btn.className = 'copy-btn';
      btn.onclick = () => {
        navigator.clipboard.writeText(linkUrl).then(() => {
          btn.textContent = 'Copied!';
          setTimeout(() => btn.textContent = 'Copy', 1500);
        });
      };
      return btn;
    }
    async function extractLinks() {
      const url = document.getElementById('urlInput').value.trim();
      const output = document.getElementById('output');
      const btn = document.getElementById('extractBtn');
      if (!url) { output.textContent = 'Please enter a URL.'; return; }
      output.textContent = 'Extracting...';
      btn.disabled = true;
      try {
        const res = await fetch('/extract', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({url})
        });
        const data = await res.json();
        output.innerHTML = '';
        if (data.error) {
          output.textContent = 'Error: ' + data.error;
        } else if (data.type === 'none') {
          output.textContent = data.message;
        } else {
          const heading = document.createElement('p');
          heading.textContent = `Found ${data.links.length} ${data.type.toUpperCase()} link(s):`;
          heading.className = 'result-heading';
          output.appendChild(heading);
          data.links.forEach(link => {
            const wrapper = document.createElement('div');
            wrapper.className = 'link-wrapper';
            wrapper.appendChild(createLink(link));
            wrapper.appendChild(createCopyBtn(link));
            output.appendChild(wrapper);
          });
        }
      } catch (err) {
        output.textContent = 'Error: ' + err.message;
      } finally {
        btn.disabled = false;
      }
    }
  </script>
</body>
</html>
